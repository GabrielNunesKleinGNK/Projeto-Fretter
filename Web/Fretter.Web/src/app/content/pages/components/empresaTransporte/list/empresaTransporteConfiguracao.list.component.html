<m-portlet [options]="{headLarge: false}">
	<ng-container mPortletHeadTools style="background-color: white !important;">
		<button mat-raised-button matTooltip="Nova Config " color="primary" type="button" (click)="novo()">
			<span translate="">Novo</span>
		</button>
	</ng-container>
	<ng-container mPortletBody>
		<div class="mat-table__wrapper">
			<div *ngIf="viewLoading" class="m-splash-screen d-flex p-3" style="position: relative;">
				<span>Aguarde, processando... </span>
				<mat-spinner diameter="40"></mat-spinner>
			</div>
			<div *ngIf="!viewLoading && dataSource && dataSource.data.length === 0" class="p-2">
				Não foi encontrado registros para sua pesquisa
			</div>
			<mat-table [hidden]="viewLoading" class="lmat-elevation-z8" [dataSource]="dataSource" matSort
				matSortActive="id" matSortDirection="desc">
				<ng-container matColumnDef="id">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Código</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.id}}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="transporteTipo">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Tipo</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.empresaTransporteTipoItem.empresaTransporteTipoId == 1 ? 'POSTAGEM' : 'REVERSA' }}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="transportadorNome">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Transportador</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.empresaTransporteTipoItem.transportador.nomeFantasia }}
					</mat-cell>
				</ng-container>
				<ng-container matColumnDef="codigoContrato">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Cód. Contrato </mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.codigoContrato }}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="codigoIntegracao">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Cód. Integração</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.codigoIntegracao }}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="codigoCartao">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Cód. Cartão </mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.codigoCartao }}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="vigenciaInicial">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Vigência Inicial</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.vigenciaInicial | date: 'dd/MM/yyyy' }}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="vigenciaFinal">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Vigência Final</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.vigenciaFinal | date: 'dd/MM/yyyy' }}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="producao">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Ambiente</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.producao ? 'Produção' : 'Homolog/Teste'}}</mat-cell>
				</ng-container>				
				<ng-container matColumnDef="valido">
					<mat-header-cell *matHeaderCellDef mat-sort-header>Valido?</mat-header-cell>
					<mat-cell *matCellDef="let model">{{model.valido ? 'Sim' : 'Não'}}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="actions">
					<mat-header-cell *matHeaderCellDef>Ações</mat-header-cell>
					<mat-cell *matCellDef="let model">						
						<button mat-icon-button color="primary" matTooltip="Editar Configuracao" (click)="edit(model)">
							<mat-icon>create</mat-icon>
						</button>
						<button mat-icon-button color="warn" matTooltip="Excluir Configuracao" (click)="delete(model)">
							<mat-icon>delete</mat-icon>
						</button>						
						<button mat-icon-button matTooltip="Serviços Associados" (click)="listarServicos(model.id)">
							<mat-icon>list</mat-icon>
						</button>
						<button mat-icon-button style="color: #2faf2b !important;" matTooltip="Testar Configuração"
							(click)="testarIntegracao(model)" *ngIf="model.empresaTransporteTipoItem.empresaTransporteTipoId == 1">
							<mat-icon>send</mat-icon>
						</button>
					</mat-cell>
				</ng-container>
				<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
				<mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
			</mat-table>
			<mat-paginator [pageSizeOptions]="[20, 50, 100, 200]" showFirstLastButtons></mat-paginator>
		</div>
	</ng-container>
</m-portlet>