<h2 mat-dialog-title>
	<div>
		<span >{{getTitle()}}</span>
		<button class="closeButton"  type="button" [mat-dialog-close]="data.animal" matTooltip="Close">
			X
		</button>
	</div>
</h2>

<mat-dialog-content>




	<mat-tab-group>
		<mat-tab label="Usuário">
			<form class="m-form" [formGroup]="modelForm" style="width: 900px">

				<div class="form-group m-form__group row">
					<label for="example-text-input" class="col-4 col-form-label" style="text-align:right;">Nome</label>
					<div class="col-6">
						<input id="nome" name="nome" class="form-control" required formControlName="nome" required>
						<div *ngIf="nome.invalid && (nome.dirty || nome.touched)" class="alert alert-danger">
							<div *ngIf="nome.errors.required">Nome é obrigatório</div>
						</div>
					</div>
				</div>
				<div class="form-group m-form__group row">
					<label for="example-text-input" class="col-4 col-form-label" style="text-align:right;">Login</label>
					<div class="col-6">
						<input id="login" name="login" class="form-control" required formControlName="login" required>
						<div *ngIf="login.invalid && (login.dirty || login.touched)" class="alert alert-danger">
							<div *ngIf="login.errors.required">login é obrigatório</div>
						</div>
					</div>
				</div>
				<div class="form-group m-form__group row">
					<label for="example-text-input" class="col-4 col-form-label" style="text-align:right;">Email</label>
					<div class="col-6">
						<input id="email" name="email" class="form-control" required formControlName="email" required>
						<div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
							<div *ngIf="email.errors.required">email é obrigatório</div>
						</div>
					</div>
				</div>
				<div class="form-group m-form__group row">
					<label for="example-text-input" class="col-4 col-form-label"
						style="text-align:right;">Telefone</label>
					<div class="col-6">
						<input id="telefone" name="telefone" class="form-control" required formControlName="telefone"
							required>
						<div *ngIf="telefone.invalid && (telefone.dirty || telefone.touched)"
							class="alert alert-danger">
							<div *ngIf="telefone.errors.required">telefone é obrigatório</div>
						</div>
					</div>
				</div>
				<div class="form-group m-form__group row">
					<label for="example-text-input" class="col-4 col-form-label" style="text-align:right;">Tipo:</label>
					<div class="col-6">
						<ng-select [items]="tipos" bindLabel="descricao" bindValue="id" placeholder="Selecione um tipo"
							[(ngModel)]="model.usuarioTipoId" formControlName="usuarioTipoId" appendTo="body">
						</ng-select>
					</div>
				</div>

				<div class="form-group m-form__group row">
					<label for="example-text-input" class="col-4 col-form-label" style="text-align:right;">Grupo:</label>
					<div class="col-6">
						<ng-select [items]="grupos" bindLabel="descricao" bindValue="id" placeholder="Selecione um grupo"
							[(ngModel)]="model.grupoPosVendaId" formControlName="grupoPosVendaId" appendTo="body">
						</ng-select>
					</div>
				</div>
				<div class="form-group m-form__group row" *ngIf="model.id > 0">
					<label for="example-text-input" class="col-4 col-form-label"
						style="text-align:right;">Bloqueado?</label>
					<div class="col-6">
						<input type="checkbox" formControlName="bloqueado">
					</div>
				</div>
				<div class="form-group m-form__group row" *ngIf="model.id > 0">
					<label for="example-text-input" class="col-4 col-form-label" style="text-align:right;">Alterar
						Senha</label>
					<div class="col-6">
						<input type="checkbox" formControlName="alterarSenha">
					</div>
				</div>
				<div class="form-group m-form__group row" *ngIf="alterarSenha.value || model.id == 0">
					<label for="example-text-input" class="col-4 col-form-label"
						style="text-align:right;">Senha:</label>
					<div class="col-6">
						<input id="senha" name="senha" type="password" class="form-control" required
							formControlName="senha">
						<div *ngIf="senha.invalid && (senha.dirty || senha.touched)" class="alert alert-danger">
							<div *ngIf="senha.errors.required">senha é obrigatório</div>
						</div>
					</div>
				</div>
				<div class="form-group m-form__group row">
					<label for="example-text-input" class="col-4 col-form-label"
						style="text-align:right;">Avatar:</label>
					<div class="col-6">
						<input id="avatar" name="avatar" #imageInput type="file" accept="image/*"
							(change)="processFile(imageInput)">
					</div>
				</div>
				<div class="form-group m-form__group row">
					<div class="col-4"></div>
					<div class="col-6">
						<img id="ProdutoPreview" class="md-card-image imagen" [src]="model.avatar" alt=""
							style="object-fit: contain;border:0px; width: 120px;border-radius: 50%;"
							formControlName="avatar" />
					</div>
				</div>
			</form>

		</mat-tab>
		<mat-tab label="Permissões">
			<mat-card class="colored-card">
				<mat-card-content>
					<div class="form-group  row">
						<div class="col-md-12 ">
							<button [disabled]="disabled" (click)="selecionarTodos()" mat-raised-button
								style="margin-right: 10px;" class="bg-success text-white">
								Selecionar Todos
							</button>
							<button [disabled]="disabled" (click)="removerTodos()" mat-raised-button color="warn">
								Remover Todos
							</button>
						</div>
					</div>

					<div class="box box-default">
						<div class="box-body">
							<div body>
								<div class="form-group row">
									<div class="col-md-3 col-lg-2" *ngFor="let p of permissoes">
										<mat-checkbox [disabled]="disabled" [(ngModel)]="p.hasPermission">
											{{ p.name }}
										</mat-checkbox>

										<div *ngFor="let sub of p.subMenus">
											<mat-checkbox [disabled]="disabled" [(ngModel)]="sub.hasPermission"
												*ngIf="p.hasSubMenu">
												{{ sub.name }}
											</mat-checkbox>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>

				</mat-card-content>
			</mat-card>

		</mat-tab>

	</mat-tab-group>




</mat-dialog-content>
<mat-dialog-actions align="end">
	<button type="button" mat-raised-button color="danger" [mat-dialog-close]="data.animal" matTooltip="Cancel changes">
		Cancelar
	</button>
	<button type="button" mat-raised-button color="primary" (click)="onSubmit()" [disabled]="viewLoading"
		matTooltip="Save changes">
		Salvar
	</button>
</mat-dialog-actions>